var target=document.querySelector(".js-guard"),BASE_URL="https://api.themoviedb.org/3/",ENDPOINT="trending/movie/day",API_KEY="4a5d686b020f509eaf7a11c7e6302126",list=document.querySelector(".js-list"),currentPage=1,options={root:null,rootMargin:"300px",threshold:1},observer=new IntersectionObserver(onLoad,options);function onLoad(t,e){t.forEach((function(n){n.isIntersecting&&(console.log(t),getTrending(currentPage+=1).then((function(t){list.insertAdjacentHTML("beforeend",createMarkup(t.results)),t.page===t.total_pages&&e.unobserve(target)})).catch((function(t){return console.log(t)})))}))}function createMarkup(t){return t.map((function(t){var e=t.poster_path,n=t.title;return'<li>\n    <img src="https://image.tmdb.org/t/p/w400'.concat(e,'" alt="').concat(n,'">\n    <h2>').concat(n,"</h2>\n</li>")})).join("")}function getTrending(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return fetch("".concat(BASE_URL).concat(ENDPOINT,"?api_key=").concat(API_KEY,"&page=").concat(t)).then((function(t){if(!t.ok)throw new Error(t.statusText);return t.json()}))}getTrending().then((function(t){list.insertAdjacentHTML("beforeend",createMarkup(t.results)),observer.observe(target)})).catch((function(t){return console.log(t)}));
//# sourceMappingURL=films-v2.8e1cbee0.js.map
