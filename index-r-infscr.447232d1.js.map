{"mappings":"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","sources":["src/templates/articles-infscr.hbs","node_modules/@swc/helpers/lib/_class_call_check.js","node_modules/@swc/helpers/lib/_create_class.js","src/js/news-service-infscr.js","<<jsx-config-pragma.js>>","src/index-r-infscr.js"],"sourcesContent":["{{#each this}}\n  <li>\n    <a href=\"{{url}}\" target=\"_blank\" rel=\"noopener noreferrer\">\n      <article>\n        <img src=\"{{urlToImage}}\" alt=\"\" width=\"480\">\n        <h2>{{title}}</h2>\n        <p>Posted by: {{author}}</p>\n        <p>{{description}}</p>\n      </article>\n    </a>\n  </li>\n{{/each}}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classCallCheck;\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _createClass;\nfunction _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nfunction _defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\n","const API_KEY = 'bb47a995514a49758140b073ef1103f5';\nconst BASE_URL = 'https://newsapi.org/v2';\nconst options = {\n  headers: {\n    Authorization: API_KEY,\n  },\n};\n\nexport default class NewsApiService {\n  constructor() {\n    this.searchQuery = '';\n    this.page = 1;\n  }\n\n  fetchArticles() {\n    const searchParams = new URLSearchParams({\n      q: this.searchQuery,\n      language: 'en',\n      pageSize: 10,\n      page: this.page,\n    });\n    const url = `${BASE_URL}/everything?${searchParams}`;\n    // const url = `${BASE_URL}/everything?q=${this.searchQuery}&language=en&pageSize=10&page=${this.page}`;\n\n    return fetch(url, options)\n      .then(response => response.json())\n      .then(({ articles }) => articles);\n  }\n\n  incrementPage() {\n    this.page += 1;\n  }\n\n  resetPage() {\n    this.page = 1;\n  }\n\n  get query() {\n    return this.searchQuery;\n  }\n\n  set query(newQuery) {\n    this.searchQuery = newQuery;\n  }\n}\n",null,"// https://www.smashingmagazine.com/2018/01/deferring-lazy-loading-intersection-observer-api/\n\n// import './js/if'; // test\n// import './js/io'; // test\nimport articlesTpl from './templates/articles-infscr.hbs';\nimport NewsApiService from './js/news-service-infscr';\n\nconst refs = getRefs();\nconst newsApiService = new NewsApiService();\n\nrefs.searchForm.addEventListener('submit', onSearch);\n\nfunction onSearch(e) {\n  e.preventDefault();\n  newsApiService.query = e.currentTarget.elements.query.value;\n\n  if (newsApiService.query === '') {\n    return alert('Введи что-то нормальное');\n  }\n\n  newsApiService.resetPage();\n  clearArticlesContainer();\n  newsApiService.fetchArticles().then(articles => {\n    appendArticlesMarkup(articles);\n    newsApiService.incrementPage();\n  });\n}\n\nfunction appendArticlesMarkup(articles) {\n  refs.articlesContainer.insertAdjacentHTML('beforeend', articlesTpl(articles));\n}\n\nfunction clearArticlesContainer() {\n  refs.articlesContainer.innerHTML = '';\n}\n\nfunction getRefs() {\n  return {\n    searchForm: document.querySelector('.js-search-form'),\n    articlesContainer: document.querySelector('.js-articles-container'),\n    sentinel: document.querySelector('#sentinel'),\n  };\n}\n\nconst onEntry = entries => {\n  entries.forEach(entry => {\n    if (entry.isIntersecting && newsApiService.query !== '') {\n      // console.log('Пора грузить еще статьи' + Date.now());\n      newsApiService.fetchArticles().then(articles => {\n        appendArticlesMarkup(articles);\n        newsApiService.incrementPage();\n      });\n    }\n  });\n};\n\nconst observer = new IntersectionObserver(onEntry, {\n  rootMargin: '150px',\n});\nobserver.observe(refs.sentinel);\n"],"names":["$l5bVx","parcelRequire","$1719d55414671ceb$export$2e2bcd8739ae039","$parcel$interopDefault","template","container","depth0","helpers","partials","data","helper","alias1","nullContext","alias2","hooks","helperMissing","alias3","alias4","escapeExpression","lookupProperty","parent","propertyName","Object","prototype","hasOwnProperty","call","name","hash","loc","start","line","column","end","compiler","main","stack1","fn","program","inverse","noop","useData","defineProperty","$665014edacbfe17b$exports","value","default","instance","Constructor","TypeError","$74e7f8130373505f$var$_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","$74e7f8130373505f$exports","protoProps","staticProps","$7b7031851ef0841f$var$options","headers","Authorization","$7b7031851ef0841f$export$2e2bcd8739ae039","NewsApiService","this","searchQuery","page","searchParams","URLSearchParams","q","language","pageSize","url","concat","fetch","then","response","json","param","articles","newQuery","$ac33f3b09885dd86$var$refs","searchForm","document","querySelector","articlesContainer","sentinel","$ac33f3b09885dd86$var$newsApiService","$ac33f3b09885dd86$var$appendArticlesMarkup","insertAdjacentHTML","addEventListener","e","preventDefault","query","currentTarget","elements","alert","resetPage","innerHTML","fetchArticles","incrementPage","IntersectionObserver","entries","forEach","entry","isIntersecting","rootMargin","observe"],"version":3,"file":"index-r-infscr.447232d1.js.map"}