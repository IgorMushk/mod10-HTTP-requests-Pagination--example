{"mappings":"AAIA,IAAMA,SAAW,gCACXC,SAAW,qBAEXC,QAAU,mCACVC,KAAOC,SAASC,cAAc,YAC9BC,SAAWF,SAASC,cAAc,YACpCE,YAAc,EAsBlB,SAASC,SAEPC,YADAF,aAAe,GAEZG,MAAK,SAAAC,GACJR,KAAKS,mBAAmB,YAAaC,aAAaF,EAAKG,UAEnDH,EAAKI,OAASJ,EAAKK,cACrBV,SAASW,QAAS,E,IAGrBC,OAAM,SAAAC,G,OAAOC,QAAQC,IAAIF,E,IAG9B,SAASV,c,IAAYM,EAAAO,UAAAC,OAAA,YAAAD,UAAA,GAAQA,UAAA,GAAD,EAC1B,OAAOE,MAAM,GAAcC,OAAXzB,UAA+ByB,OAApBxB,SAAS,aAA2BwB,OAAhBvB,QAAQ,UAAauB,OAALV,IAAQL,MACrE,SAAAgB,GACE,IAAKA,EAAKC,GACR,MAAM,IAAIC,MAAMF,EAAKG,YAGvB,OAAOH,EAAKI,M,IAiBlB,SAASjB,aAAakB,GACpB,OAAOA,EACJC,KACC,SAAAC,G,IAAGC,EAAWD,EAAXC,YAAaC,EAAKF,EAALE,M,MAAY,sDACkCV,OAArBS,EAAY,WACjDT,OAD0DU,EAAM,gBAC1DV,OAANU,EAAM,e,IAGXC,KAAK,G,CA/CV9B,SAAS+B,iBAAiB,QAAS7B,QA4BLC,cAC3BC,MAAK,SAAAC,GACJR,KAAKS,mBAAmB,YAAaC,aAAaF,EAAKG,UAGnDH,EAAKI,OAASJ,EAAKK,cACrBV,SAASW,QAAS,E,IAGrBC,OAAM,SAAAC,G,OAAOC,QAAQC,IAAIF,E","sources":["src/js/films.js"],"sourcesContent":["// let observer = new IntersectionObserver(callback, options);\n// function callback(evt){\n// console.log(evt);\n// }\nconst BASE_URL = 'https://api.themoviedb.org/3/';\nconst ENDPOINT = 'trending/movie/day';\n//const API_KEY = '345007f9ab440e5b86cef51be6397df1';\nconst API_KEY = '4a5d686b020f509eaf7a11c7e6302126';\nconst list = document.querySelector('.js-list');\nconst loadMore = document.querySelector('.js-load');\nlet currentPage = 1;\n\n// - 1 -\n// function getTrending() {\n//   //return fetch(`${BASE_URL}${ENDPOINT}?api_key=${API_KEY}`).then(\n//   return fetch(`${BASE_URL}${ENDPOINT}?api_key=${API_KEY}&page=20`).then(\n//     resp => {\n//       if (!resp.ok) {\n//         throw new Error(resp.statusText);\n//       }\n//\n//       return resp.json();\n//     }\n//   );\n// }\n//\n// getTrending()\n//   .then(data => console.log(data))\n//   .catch(err => console.log(err));\n\nloadMore.addEventListener('click', onLoad);\n\nfunction onLoad() {\n  currentPage += 1;\n  getTrending(currentPage)\n    .then(data => {\n      list.insertAdjacentHTML('beforeend', createMarkup(data.results));\n      // Если текущая страница и общее количество страниц совпало, скрываем кнопку\n      if (data.page === data.total_pages) {\n        loadMore.hidden = true;\n      }\n    })\n    .catch(err => console.log(err));\n}\n\nfunction getTrending(page = 1) {\n  return fetch(`${BASE_URL}${ENDPOINT}?api_key=${API_KEY}&page=${page}`).then(\n    resp => {\n      if (!resp.ok) {\n        throw new Error(resp.statusText);\n      }\n\n      return resp.json();\n    }\n  );\n}\n\n// Первый показ загруженной страницы\ngetTrending()\n  .then(data => {\n    list.insertAdjacentHTML('beforeend', createMarkup(data.results));\n    //observer.observe(target);\n    // Если текущая страница и общее количество страниц не совпадве отоброжаем кнопку\n    if (data.page !== data.total_pages) {\n      loadMore.hidden = false;\n    }\n  })\n  .catch(err => console.log(err));\n\nfunction createMarkup(arr) {\n  return arr\n    .map(\n      ({ poster_path, title }) => `<li>\n    <img src=\"https://image.tmdb.org/t/p/w400${poster_path}\" alt=\"${title}\">\n    <h2>${title}</h2>\n</li>`\n    )\n    .join('');\n}\n\n// // ПЕРЕРВА ДО 22.00\n\n// let counter = 0;\n// document.addEventListener(\"scroll\", onScroll);\n\n// function onScroll() {\n//   counter += 1;\n//   console.log(counter);\n// }\n"],"names":["BASE_URL","ENDPOINT","API_KEY","list","document","querySelector","loadMore","currentPage","onLoad","getTrending","then","data","insertAdjacentHTML","createMarkup","results","page","total_pages","hidden","catch","err","console","log","arguments","length","fetch","concat","resp","ok","Error","statusText","json","arr","map","param","poster_path","title","join","addEventListener"],"version":3,"file":"films.c4cb2f32.js.map"}